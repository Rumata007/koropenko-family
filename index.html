<html lang="en"><head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <meta name="csrf-token" content="B1bLInqkyEiAecS6JNqxNEW1lJPhAz6C3VemzvvX">
        <title>Koropenko.family - Колесо баланса</title>
        <!-- Fonts -->
        <link rel="dns-prefetch" href="//fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Amatic+SC&amp;display=swap" rel="stylesheet">
        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css">
        <link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
        <link href="css/custom.css" type="text/css" rel="stylesheet">
        <!-- Favicon -->
        <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-icon.png">
    </head>
    <body class="back-0" cz-shortcut-listen="true">
    <a href="http://koropenko.family/" id="logo">Koropenko.family</a>
    <div class="loader" style="display: none;">
        <div class="lds-ring"><div class="logo"></div><div></div><div></div><div></div><div></div></div>
    </div>
    <div class="container">
        <div class="row">
            <!-- Begin Questions -->
    <div id="questions">
        <h4 class="animate__animated animate__backInDown title">Ответьте на несколько вопросов</h4>
        <h3 class="animate__animated animate__zoomIn question-text">1. Как вы оцениваете сферу своих любовных отношений - выберите от 1 до 10</h3>
        <div class="animate__animated animate__flipInX question">
            <div class="range-slider">
                <span id="rs-bullet" class="rs-label">1</span>
                <input id="rs-range-line" class="rs-range" type="range" value="1" min="1" max="10">
            </div>
        </div>
        <div id="flip-form-continue">
            <button class="animate__animated animate__backInUp continue">Продолжить</button>
        </div>
    </div>
    <!-- End Questions -->
    <!-- Begin Wheel -->
    <div id="wheel">
        <h3 class="wheel-title">Перед началом движения узнайте свою исходную точку.</h3>
        <div class="wheel-outside">
            <div class="wheel-inside animate__animated animate__zoomIn">
                <div class="circle-figure">
                <div class="center"></div>
                    <div class="stroke-container stroke-1">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="stroke-container stroke-2">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="stroke-container stroke-3">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="stroke-container stroke-4">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="stroke-container stroke-5">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                    <div class="stroke-container stroke-6">
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                        <div class="stroke"></div>
                        <div class="dot"></div>
                    </div>
                </div>
            </div>
        </div>
        <h4 class="wheel-bottom-title">Колесо баланса</h4>
        
    </div>
    <!-- End Wheel -->
        </div>
    </div>
    <!-- jQuery -->
    <script src="js/jquery/jquery-2.2.4.min.js"></script>
    <!-- Bootstrap js -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Scripts -->
    <script src="js/segment.min.js"></script>
        <script>
            $(document).ready(function() {
                $(".loader").fadeOut();
    
                var ua = navigator.userAgent,
                    event,
                    val,
                    qbulletPosition,
                    elementsCount,
                    list,
                    key = 1,
                    windowWidth,
                    sliderWidth,
                    questionNumber = 0,
                    prevQuestion = 0,
                    questionValue = [],
                    rangeSlider = document.getElementById("rs-range-line"),
                    rangeBullet = document.getElementById("rs-bullet"),
                    questions = [
                        "1.Оцените свою удовлетворённость сексуальной жизнью/своей сексуальностью  - выберите от 1 до 10",
                        "2. Как вы оцениваете свой баланс в вопросе: сколько вы берёте у своего партнера/себя и отдаёте. - выберите от 1 до 10",
                        "3. Как вы оцениваете совместное времяпровождение/ время на себя  - выберите от 1 до 10",
                        "4. Как принимаете/уважаете своего партнера/себя? - выберите от 1 до 10",
                        "5. Как вы оцениваете упование знания своего партнера/ себя - выберите от 1 до 10",
                        "6. Как вы оцениваете свою удовлетворённость от общей цели/ от своей картинки желаемых отношений - выберите от 1 до 10",
                    ];
                    coordArray = [];
    
                if ( ua.match(/iPad/i) || ua.match(/iPhone/i) ) {
                    event = "touchstart";
                } else {
                    event = "click";
                }
    
                rangeSlider.addEventListener("input", showSliderValue, false);
    
                //Показываем значение сверху у слайдера
                if ($(window).width() > 413 && $(window).width() < 500) {
                    windowWidth = $(window).width() - 110;
                    sliderWidth = windowWidth;
                } else if ($(window).width() > 374 && $(window).width() < 414){
                    windowWidth = $(window).width() - 100;
                    sliderWidth = windowWidth;
                } else if ($(window).width() > 319 && $(window).width() < 373){
                    windowWidth = $(window).width() - 95;
                    sliderWidth = windowWidth;
                } else {
                    sliderWidth = 560;
                }
                function showSliderValue() {
                    rangeBullet.innerHTML = rangeSlider.value;
                    bulletPosition = sliderWidth * ((rangeSlider.value - rangeSlider.min) / (rangeSlider.max- rangeSlider.min));
                    rangeBullet.style.left = bulletPosition + "px";
                }
                //Первая инициализация вопросов
                $(".question-text").text(questions[0]);
                //Продолжить - дейтсвие
                $(".continue").click(function() {
                    $(".loader").fadeIn();
                    val = $("#rs-range-line").val();
                    questionValue.push(val);
                    questionNumber++;
                    
                    setTimeout(function() { //Прохождение вопросов
                        if (questionNumber < questions.length) {
                            $(".question-text").text(questions[questionNumber]);
                            $("#rs-range-line").val(0);
                            
                            $("body").removeClass("back-" + prevQuestion);
                            $("body").addClass("back-" + questionNumber);
                            
                            rangeBullet.innerHTML = 1;
                            rangeBullet.style.left = 0;
                            
                            $(".loader").fadeOut();
                            prevQuestion++;
                        } else {
                            $("#questions").fadeOut();
                            $(".loader").fadeIn();
                            $("body").removeClass("back-5");
                            setTimeout(function() {
                                $("body").addClass("circle-body");
                                $("#wheel").addClass("wheel-visible");
                                $("#logo").hide();
                                if ( $(window).width() < 768) {
                                    $("#logo-bottom").hide();
                                }
                                $(".loader").fadeOut();
                                setTimeout(function() {
                                    questionValue.forEach((answer) => {
                                        elementsCount = parseInt(answer) * 2;
                                        list = $('.stroke-' + key).children();
                                        let coordinates = list[elementsCount-1].getBoundingClientRect();
                                        coordArray.push(coordinates.x);
                                        coordArray.push(coordinates.y);
                                        for (var j = 0; j < elementsCount; j++) {
                                            if (j % 2 == 0) {
                                                list[j].classList.add('transition-stroke', 'color-stroke--' + key);
                                            } else {
                                                list[j].classList.add('transition-dot', 'color-dot--' + key);
                                            }
                                            list[elementsCount-1].id = 'last-' + key;
                                        }
                                        key++;
                                    });
    
                                    setTimeout(function() {
                                        let circleWidth = $(".circle-figure").width();
                                        let circleHeight = $(".circle-figure").height();
                                        let coordArray = [];
                                        let k = 0;
    
                                        for (let k = 1; k < 7; k++) {
                                            coordArray.push( $("#last-" + k).offset().left - $(".circle-figure").offset().left + 5 );
                                            coordArray.push( $("#last-" + k).offset().top - $(".circle-figure").offset().top + 4 );
                                        }
    
                                        for (let i = 0; i < 6; i++) {
                                            if (k < 9) {
                                                let svg = "<svg style=\"width: " + circleWidth + "px; height: " + circleHeight + "px;\" class=\"svg\"> \
                                                    <line id=\"my-path-" + (i + 1) + "\" x1=\""+ coordArray[k+2] + "\" \
                                                    y1=\"" + coordArray[k+3] + "\" \
                                                    x2=\""+ coordArray[k] + "\" \
                                                    y2=\""+ coordArray[k+1] + "\" class=\"svg-" + (i + 1) + "\" /></svg>";
                                                    $(".circle-figure").append(svg);
                                                    svg = "";
                                                    k = k + 2;
                                            } else if (k == 10) {
                                                let svg = "<svg style=\"width: " + circleWidth + "px; height: " + circleHeight + "px;\" class=\"svg\"> \
                                                    <line id=\"my-path-" + (i + 1) + "\" x1=\""+ coordArray[0] + "\" \
                                                    y1=\"" + coordArray[1] + "\" \
                                                    x2=\""+ coordArray[k] + "\" \
                                                    y2=\""+ coordArray[k+1] + "\" class=\"svg-" + (i + 1) + "\" /></svg>";
                                                $(".circle-figure").append(svg);
                                            }
                                            setTimeout(function() {
                                                $(".svg-1").addClass("transition-svg-1");
                                                $(".svg-2").addClass("transition-svg-2");
                                                $(".svg-3").addClass("transition-svg-3");
                                                $(".svg-4").addClass("transition-svg-4");
                                                $(".svg-5").addClass("transition-svg-5");
                                                $(".svg-6").addClass("transition-svg-6");
                                            }, 50) 
                                        }
                                    }, 1565)   
                                }, 100)
                            }, 1000)
                        } 
                    }, 1000)
                });
            });
        </script>
    </body></html>